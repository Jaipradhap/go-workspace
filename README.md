# go-workspace
golang programs from go.dev

Gorilla's mux package, requests can be matched based on URL host, path, path prefix, schemes, header and query values, and HTTP methods.

go get github.com/gorilla/mux

Mongo DB :
----------
docker pull mongo <br/>
docker image inspect mongo  <br/>
docker run -d  --name mongo-on-docker  -p 27888:27017 -e MONGO_INITDB_ROOT_USERNAME=mongoadmin -e MONGO_INITDB_ROOT_PASSWORD=secret mongo  <br/>

#created folder to use for storing MongoDB data  <br/>
sudo mkdir /var/dbdata  <br/>
docker run -it -d -v /var/dbdata:/data/db -p 27017:27017 --name mongodb mongo  <br/>
docker start mongodb  <br/>
sudo docker exec -it mongodb bash  <br/>

docker run --link mongo_db_name_container:mongo -p 8081:8081 -e ME_CONFIG_MONGODB_URL="mongodb://mongo:27017" mongo-express  <br/>
docker run --link mongodb:mongo -p 8081:8081 -e ME_CONFIG_MONGODB_URL="mongodb://mongo:27017" mongo-express  <br/>

After above DB setup, next time onwards use the following steps : <br/>
docker start mongodb  <br/>
docker run --link mongodb:mongo -p 8081:8081 -e ME_CONFIG_MONGODB_URL="mongodb://mongo:27017" mongo-express <br/>
mongo ui -- http://localhost:8081 <br/>


https://www.mongodb.com/blog/post/mongodb-go-driver-tutorial

mongodb://<username>:<password>@<host>:<port>/?authSource=admin
mongodb://mongoadmin:secret@localhost:27888/?authSource=admin <br/>

Authentication :
----------------
Cookie based  - session holds the auth info.Stateful One. <br/>
Token based - JWT , oAuth 2 <br/>

1.oAuth 2 : <br/>
Step -1 : Register App with identity providers such Azure, Facebook,Google. it gives you a client ID and a client secret key <br/>
Step -2 : Once hit with above ID & Key, auth server provides Access Token<br/> 

2.JWT : <br/> 
Step -1 : After successful login , Access tokens are generated & signed securely.<br/>
Step -2 : Subsequent HTTP Request have Authorization Header - bearer token & gets validated at web server end.<br/>


Swagger  :
----------------
<br/>

1.swagger api in go

https://www.soberkoder.com/swagger-go-api-swaggo/

<br/>Code : <br/>

import (
	"encoding/json"
	"log"
	"net/http"
	"strconv"
	"time"

	_ "swaggo-orders-api/docs" // docs is generated by Swag CLI, you have to import it.

	httpSwagger "github.com/swaggo/http-swagger"

	"github.com/gorilla/mux"
)

func main() {
	router := mux.NewRouter()
	// Create
	router.HandleFunc("/orders", createOrder).Methods("POST")
	// Read
	router.HandleFunc("/orders/{orderId}", getOrder).Methods("GET")
	// Read-all
	router.HandleFunc("/orders", getOrders).Methods("GET")
	// Update
	router.HandleFunc("/orders/{orderId}", updateOrder).Methods("PUT")
	// Delete
	router.HandleFunc("/orders/{orderId}", deleteOrder).Methods("DELETE")

	// Swagger
	router.PathPrefix("/swagger").Handler(httpSwagger.WrapHandler)
	log.Fatal(http.ListenAndServe(":8080", router))

}

http://localhost:8080/swagger/index.html

<br/>

DOckerFile :
----------------
<br/>
1.Docker File for golang : https://www.youtube.com/watch?v=USbPCBi_d4U   <br/>

FROM  <br/>
RUN  <br/>
EXPOSE  <br/>
ENTRYPOINT  <br/>

1--Make Image : docker build -t gowebapi . <br/>
2--Run Image : docker run -p 8088:8080 -tid gowebapi  <br/>


2.  https://www.youtube.com/watch?v=WPpw61vScIs <br/>

https://www.youtube.com/watch?v=kd-8mb6HfGA&list=PL3eAkoh7fypqUQUQPn-bXtfiYT_ZSVKmB  <br/>

DockerFlie :
</br>
FROM golang:latest </br>
LABEL maintainer="gophers" </br>
WORKDIR /app </br>
COPY go.mod . </br>
COPY go.sum . </br>
RUN go mod download </br>
COPY . . </br>
ENV PORT 7000 </br>
RUN go build </br>
CMD ["./go-mux-api"] </br>


1--Make Image : docker build -t gomuxapi . <br/>
2--Run Image : docker run -p 8000:7000 -tid gomuxapi  <br/>